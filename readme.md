# ğŸ“ Serverless GAS CMS (ç„¡ä¼ºæœå™¨å¯«ä½œå¾Œå°)

é€™æ˜¯ä¸€å€‹æ¥µè¼•é‡åŒ–ã€å®Œå…¨ç„¡éœ€å‚³çµ±å¾Œç«¯ä¼ºæœå™¨ï¼ˆNo-Backendï¼‰çš„å¯«ä½œå…§å®¹ç®¡ç†ç³»çµ±ã€‚å®ƒä½¿ç”¨ Google Sheets ä½œç‚ºè³‡æ–™åº«ï¼ŒGoogle Apps Script (GAS) ä½œç‚º API ä»‹é¢ï¼Œä¸¦é€é **HTML + CSS + JS** (åˆ†é›¢å¼æ¶æ§‹) é€²è¡Œå¯«ä½œèˆ‡ç®¡ç†ã€‚

é©åˆæƒ³è¦æ“æœ‰å€‹äººéƒ¨è½æ ¼ã€ä½†ä¸æƒ³ç¶­è­·ä¼ºæœå™¨æˆ–æ”¯ä»˜ä¸»æ©Ÿè²»ç”¨çš„é–‹ç™¼è€…èˆ‡å‰µä½œè€…ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

*   **å®Œå…¨å…è²» & ç„¡ä¼ºæœå™¨**ï¼šåˆ©ç”¨ Google ç”Ÿæ…‹ç³» (Sheets + GAS) é‹ä½œï¼Œé›¶ä¸»æ©Ÿæˆæœ¬ã€‚
*   **éŸ¿æ‡‰å¼è¨­è¨ˆ (RWD)**ï¼š
    *   ğŸ’» **é›»è…¦ç‰ˆ**ï¼šé¡ä¼¼ CMS çš„å·¦å´åˆ—è¡¨ã€å³å´ç·¨è¼¯ä½ˆå±€ã€‚
    *   ğŸ“± **æ‰‹æ©Ÿç‰ˆ**ï¼šApp å¼é«”é©—ï¼Œæ”¯æ´å´é‚Šæ¬„æŠ½å±œ (Off-canvas) èˆ‡è§¸æ§å„ªåŒ–ã€‚
*   **å¼·å¤§çš„ç·¨è¼¯å™¨**ï¼šæ•´åˆ Quill.js å¯Œæ–‡æœ¬ç·¨è¼¯å™¨ï¼Œæ”¯æ´åœ–ç‰‡ã€åˆ—è¡¨ã€ç¨‹å¼ç¢¼å€å¡Šã€‚
*   **æœ¬åœ°è‰ç¨¿ç®± (Local Storage)**ï¼š
    *   æ”¯æ´å¤šç¯‡è‰ç¨¿ç®¡ç†ã€‚
    *   **è‡ªå‹•å„²å­˜**ï¼šé˜²æ­¢ç€è¦½å™¨å´©æ½°æˆ–èª¤è§¸é—œé–‰å°è‡´æ–‡ç« éºå¤±ã€‚
*   **éœæ…‹ HTML ç”¢å‡º**ï¼šç›´æ¥ç”Ÿæˆä¹¾æ·¨çš„ HTML ç¢¼ï¼Œæ–¹ä¾¿è²¼åˆ°ä»»ä½•å¹³å°æˆ–é€éè‡ªå‹•åŒ–å·¥å…·ç™¼å¸ƒã€‚
*   **è·¨ä¾†æºå‚³è¼¸**ï¼šä½¿ç”¨ no-cors æ¨¡å¼èˆ‡ Google Apps Script æºé€šã€‚

## ğŸš€ å¿«é€Ÿé–‹å§‹ (å®‰è£æŒ‡å—)

### ç¬¬ä¸€æ­¥ï¼šè¨­å®šå¾Œç«¯ (Google Sheets + Apps Script)

1.  å»ºç«‹ä¸€å€‹æ–°çš„ Google Sheetã€‚
2.  å°‡ä¸‹æ–¹çš„å·¥ä½œè¡¨åç¨±ç”± `å·¥ä½œè¡¨1` ä¿®æ”¹ç‚º `Posts` (æ³¨æ„å¤§å°å¯«)ã€‚
3.  é»æ“Šé¸å–®åˆ—çš„ **æ“´å……åŠŸèƒ½ (Extensions)** > **Apps Script**ã€‚
4.  æ¸…ç©ºç·¨è¼¯å™¨å…§å®¹ï¼Œè²¼ä¸Šä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š

```javascript
function doPost(e) {
  var lock = LockService.getScriptLock();
  lock.tryLock(10000);

  try {
    var data = JSON.parse(e.postData.contents);
    var doc = SpreadsheetApp.getActiveSpreadsheet();
    var sheet = doc.getSheetByName('Posts');
    
    if (!sheet) {
      sheet = doc.insertSheet('Posts');
      // è¨­å®šæ¨™é¡Œåˆ— (Headers)
      sheet.appendRow(['id', 'slug', 'title', 'tags', 'category', 'image', 'content', 'publish', 'update']);
    }
    
    // å¯«å…¥è³‡æ–™
    sheet.appendRow([
      data.id,
      data.slug,
      data.title,
      data.tags,
      data.category,
      data.image,
      data.content,
      data.publish,
      data.update
    ]);

    return ContentService
      .createTextOutput(JSON.stringify({ "result": "success" }))
      .setMimeType(ContentService.MimeType.JSON);

  } catch (e) {
    return ContentService
      .createTextOutput(JSON.stringify({ "result": "error", "error": e.toString() }))
      .setMimeType(ContentService.MimeType.JSON);
  } finally {
    lock.releaseLock();
  }
}

```

5.  é»æ“Šå³ä¸Šè§’çš„ **éƒ¨ç½² (Deploy)** > **æ–°å¢éƒ¨ç½² (New deployment)**ã€‚
6.  é»æ“Šé½’è¼ªåœ–ç¤ºï¼Œé¸æ“‡ **ç¶²é æ‡‰ç”¨ç¨‹å¼ (Web app)**ã€‚
7.  è¨­å®šå¦‚ä¸‹ï¼š
    *   **èªªæ˜**ï¼šServerless CMS API (éš¨æ„å¡«å¯«)
    *   **åŸ·è¡Œèº«åˆ†**ï¼šæˆ‘ (Me)
    *   **èª°å¯ä»¥å­˜å–**ï¼šä»»ä½•äºº (Anyone) (é€™æ˜¯é—œéµï¼Œå¦å‰‡å‰ç«¯ç„¡æ³•å¯«å…¥)
8.  é»æ“Š **éƒ¨ç½²**ï¼Œè¤‡è£½ç”¢ç”Ÿçš„ Web App URL (ä»¥ `/exec` çµå°¾çš„ç¶²å€)ã€‚

### ç¬¬äºŒæ­¥ï¼šè¨­å®šå‰ç«¯ (å¯«ä½œä»‹é¢)

1.  ä¸‹è¼‰æœ¬å°ˆæ¡ˆçš„ `index.html`, `style.css`, `script.js`ã€‚
2.  å°‡å®ƒå€‘æ”¾åœ¨åŒä¸€å€‹è³‡æ–™å¤¾ä¸­ã€‚
3.  ä½¿ç”¨ Chrome / Edge / Safari ç­‰ç€è¦½å™¨ç›´æ¥æ‰“é–‹ `index.html`ã€‚
2.  ä½¿ç”¨ Chrome / Edge / Safari ç­‰ç€è¦½å™¨ç›´æ¥æ‰“é–‹ `index.html`ã€‚
3.  åœ¨ä»‹é¢ä¸Šæ–¹çš„ **âš™ï¸ è¨­å®š** å€å¡Šä¸­ï¼Œè²¼ä¸Šå‰›å‰›è¤‡è£½çš„ Web App URLã€‚
4.  ç³»çµ±æœƒè‡ªå‹•è¨˜ä½æ­¤ç¶²å€ï¼Œä¹‹å¾Œç„¡éœ€é‡è¤‡è¼¸å…¥ã€‚

## ğŸ“– ä½¿ç”¨èªªæ˜

### 1. æ’°å¯«æ–‡ç« 
*   å·¦å´å´é‚Šæ¬„å¯ç®¡ç†å¤šç¯‡è‰ç¨¿ã€‚
*   é»æ“Š **+ æ–°å¢æ–‡ç« ** é–‹å•Ÿæ–°æª”ã€‚
*   å…§å®¹ä¿®æ”¹æ™‚æœƒè‡ªå‹•å„²å­˜è‡³ç€è¦½å™¨ (Local Storage)ï¼Œç„¡éœ€æ‰‹å‹•å­˜æª”ã€‚

### 2. æ‰‹æ©Ÿç‰ˆæ“ä½œ
*   é»æ“Šå·¦ä¸Šè§’ **â˜°** æŒ‰éˆ•æ‰“é–‹è‰ç¨¿æ¸…å–®ã€‚
*   é»æ“Šé®ç½©å±¤æˆ–åˆ—è¡¨é …ç›®å¯é—œé–‰å´é‚Šæ¬„ã€‚
*   ç·¨è¼¯å™¨æœƒè‡ªå‹•é©æ‡‰è¢å¹•é«˜åº¦ã€‚

### 3. ç™¼å¸ƒæ–‡ç« 
*   å¡«å¯«æ¨™é¡Œèˆ‡æ¨™ç±¤ã€‚
*   é»æ“Š **ğŸš€ ç™¼ä½ˆåˆ° Google Sheet**ã€‚
*   ç”±æ–¼ CORS é™åˆ¶ï¼Œä»‹é¢æœƒé¡¯ç¤ºã€Œè«‹æ±‚å·²ç™¼é€ã€ï¼Œè«‹è‡³ä½ çš„ Google Sheet ç¢ºèªè³‡æ–™æ˜¯å¦æ–°å¢æˆåŠŸã€‚

### 4. å–å¾— HTML
*   å¦‚æœä½ éœ€è¦æ‰‹å‹•è¤‡è£½ HTML ç¢¼ï¼Œå¯é»æ“Š **æŸ¥çœ‹ HTML ç¢¼** æŒ‰éˆ•ï¼Œè¤‡è£½å¾Œè²¼è‡³ä½ çš„ç›®æ¨™å¹³å°ã€‚

## âš ï¸ æŠ€è¡“é™åˆ¶èˆ‡æ³¨æ„äº‹é …

### CORS (è·¨ä¾†æºè³‡æºå…±ç”¨)
*   å‰ç«¯ä½¿ç”¨ `mode: 'no-cors'` ç™¼é€è«‹æ±‚ã€‚é€™æ„å‘³è‘—ç€è¦½å™¨ç„¡æ³•è®€å– Google Apps Script å›å‚³çš„ success è¨Šæ¯ã€‚
*   å‰ç«¯æ¡ç”¨ã€Œæ¨‚è§€æ›´æ–° (Optimistic UI)ã€ç­–ç•¥ï¼šåªè¦è«‹æ±‚ç™¼å‡ºä¸”ç„¡ç¶²è·¯éŒ¯èª¤ï¼Œå³è¦–ç‚ºæˆåŠŸã€‚

### å®‰å…¨æ€§
*   ä½ çš„ Apps Script URL è¨­å®šç‚ºã€Œä»»ä½•äººã€çš†å¯å¯«å…¥ã€‚è«‹å‹¿éš¨æ„æ´©æ¼æ­¤ç¶²å€ï¼Œä»¥å…é­äººæƒ¡æ„çŒæ°´ã€‚
*   å»ºè­°å®šæœŸå‚™ä»½ Google Sheet è³‡æ–™ã€‚

### åœ–ç‰‡è™•ç†
*   Quill ç·¨è¼¯å™¨é è¨­å°‡åœ–ç‰‡è½‰ç‚º Base64 ç·¨ç¢¼ç›´æ¥å­˜å…¥ HTMLã€‚é€™é©åˆå°åœ–ï¼Œä½†å¤§åœ–æœƒå°è‡´ Google Sheet å„²å­˜æ ¼çˆ†æ»¿æˆ–è¼‰å…¥ç·©æ…¢ã€‚
*   **å»ºè­°**ï¼šä½¿ç”¨å¤–éƒ¨åœ–åºŠé€£çµï¼Œæˆ–åƒ…ç”¨æ­¤å·¥å…·è™•ç†ç´”æ–‡å­—æ’ç‰ˆã€‚

## ğŸ› ï¸ æœªä¾†æ“´å……å»ºè­°

å¦‚æœä½ æƒ³è®“é€™å€‹å°ˆæ¡ˆæ›´å¼·å¤§ï¼Œå¯ä»¥è€ƒæ…®ä¸²æ¥è‡ªå‹•åŒ–æµç¨‹ï¼š

*   **Google Sheet Trigger**: ç•¶ Sheet æœ‰æ–°è³‡æ–™å¯«å…¥æ™‚ï¼Œè§¸ç™¼å¦ä¸€å€‹ Scriptã€‚
*   **Make (Integromat) / Zapier**: ç›£è½ Sheet æ–°å¢åˆ— -> è‡ªå‹•ç™¼å¸ƒåˆ° WordPress / Medium / Facebook ç²‰çµ²å°ˆé ã€‚
*   **GitHub Actions**: é€é Repository Dispatch è§¸ç™¼éœæ…‹ç¶²ç«™ç”Ÿæˆ (Hugo/Hexo/Next.js) ä¸¦è‡ªå‹•éƒ¨ç½²ã€‚

## ğŸ“„ License
MIT License